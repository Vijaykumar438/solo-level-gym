/* ========== QUEST LIST ========== */
.gate-meta{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(6px,1.5vw,12px);padding:clamp(10px,2.5vw,16px) clamp(12px,3vw,18px)}
.gm-item{display:flex;flex-direction:column;align-items:center;gap:3px;padding:clamp(6px,1.5vw,10px);background:rgba(13,21,48,.6);border-radius:6px;border:1px solid rgba(79,195,247,.06)}
.gm-icon{font-size:clamp(1rem,2.5vw,1.3rem)}
.gm-val{font-family:var(--font);font-size:clamp(1.1rem,3.5vw,1.5rem);font-weight:700;color:var(--blue);text-shadow:0 0 10px rgba(79,195,247,.3)}
.gm-label{font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px}
.penalty-box .gm-val{color:var(--red)!important;text-shadow:0 0 10px rgba(255,82,82,.3)!important}

.quest-list{display:flex;flex-direction:column;gap:clamp(6px,1.5vw,10px);margin-top:clamp(10px,2.5vw,16px)}
.quest-item{
    background:var(--panel);border:1px solid var(--border);border-radius:6px;
    padding:clamp(10px,2.5vw,16px) clamp(12px,3vw,18px);display:flex;align-items:center;
    gap:clamp(8px,2vw,16px);transition:all .3s;cursor:pointer;min-height:56px;
    position:relative;overflow:hidden;
    backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
}
.quest-item::before{
    content:'';position:absolute;left:0;top:0;bottom:0;width:2px;
    background:linear-gradient(180deg,var(--blue),transparent);opacity:0;transition:opacity .3s;
}
.quest-item:hover{border-color:var(--blue);transform:translateX(4px);box-shadow:0 0 15px rgba(79,195,247,.1)}
.quest-item:hover::before{opacity:1}
.quest-item.cleared{opacity:.55;border-color:var(--green)}
.quest-item.cleared::before{background:var(--green);opacity:.6}
.quest-item.failed{opacity:.6;border-color:var(--red)}
.quest-item.failed::before{background:var(--red);opacity:.6}
.qi-check{
    width:clamp(22px,5vw,26px);height:clamp(22px,5vw,26px);
    border:2px solid var(--border);border-radius:50%;display:flex;align-items:center;justify-content:center;
    font-size:clamp(.75rem,2vw,.9rem);flex-shrink:0;transition:all .3s;
    background:rgba(13,21,48,.5);
}
.quest-item.cleared .qi-check{border-color:var(--green);color:var(--green);background:rgba(105,240,174,.12);box-shadow:0 0 8px rgba(105,240,174,.2)}
.quest-item.failed .qi-check{border-color:var(--red);color:var(--red);background:rgba(255,82,82,.12)}
.qi-body{flex:1;min-width:0}
.qi-title{font-weight:600;font-size:clamp(.9rem,2.5vw,1.05rem);color:var(--text);margin-bottom:2px;overflow-wrap:break-word}
.qi-desc{font-size:clamp(.75rem,2vw,.85rem);color:var(--dim)}
.qi-reward{text-align:right;white-space:nowrap;flex-shrink:0}
.qi-xp{font-family:var(--font);font-size:clamp(.85rem,2vw,1rem);color:var(--blue);font-weight:600}
.qi-gold{font-size:clamp(.7rem,1.8vw,.8rem);color:var(--gold)}

.gate-bonus{margin-top:clamp(10px,2.5vw,16px);padding:clamp(10px,2.5vw,14px);text-align:center;border:1px dashed var(--gold);border-radius:6px;color:var(--gold);font-size:clamp(.82rem,2vw,.95rem);position:relative;overflow:hidden}
.gate-bonus::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,215,64,.03),transparent);pointer-events:none}
.gate-bonus.claimed{border-style:solid;background:rgba(255,215,64,.06);box-shadow:0 0 20px rgba(255,215,64,.1)}
.gb-icon{margin-right:6px}

.penalty-header{color:var(--red)!important;background:rgba(255,82,82,.06)!important}
.penalty-log{padding:clamp(10px,2.5vw,16px) clamp(12px,3vw,18px);max-height:200px;overflow-y:auto}
.pen-item{padding:8px 0;border-bottom:1px solid rgba(255,82,82,.1);display:flex;justify-content:space-between;align-items:center;gap:8px}
.pen-item:last-child{border:none}
.pen-text{font-size:clamp(.78rem,2vw,.9rem);color:var(--dim)}
.pen-val{font-family:var(--font);color:var(--red);font-weight:600;font-size:clamp(.78rem,2vw,.9rem)}

/* ========== LOG FORMS ========== */
.log-form{padding:clamp(12px,3vw,18px)}
.lf-row{display:flex;flex-direction:column;gap:4px;margin-bottom:clamp(10px,2.5vw,14px)}
.lf-row label{font-family:var(--mono);font-size:clamp(.65rem,1.8vw,.75rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px}
.lf-row label small{color:var(--dim);opacity:.6;text-transform:none}
.lf-row input,.lf-row select{padding:clamp(8px,2vw,10px) clamp(10px,2.5vw,14px);background:rgba(13,21,48,.8);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:1rem;min-height:44px}
.lf-row input:focus,.lf-row select:focus{outline:none;border-color:var(--cyan);box-shadow:0 0 12px rgba(0,229,255,.2)}
.lf-two{display:grid;grid-template-columns:1fr 1fr;gap:clamp(8px,2vw,14px)}
.lf-three{display:grid;grid-template-columns:1fr 1fr 1fr;gap:clamp(8px,2vw,14px)}
.cal-preview{display:flex;justify-content:space-between;align-items:center;padding:clamp(8px,2vw,12px) clamp(10px,2.5vw,16px);background:rgba(13,21,48,.8);border:1px solid var(--green);border-radius:6px;margin-bottom:clamp(10px,2.5vw,16px)}
.cal-preview span:first-child{font-family:var(--mono);font-size:clamp(.7rem,1.8vw,.8rem);color:var(--dim)}
.cal-val{font-family:var(--font);font-size:clamp(1rem,2.5vw,1.2rem);color:var(--green);font-weight:700}

.sys-btn{
    font-family:var(--font);font-size:clamp(.78rem,2vw,.9rem);
    padding:clamp(10px,2.5vw,12px) clamp(20px,5vw,30px);
    background:transparent;border:2px solid var(--cyan);color:var(--cyan);border-radius:6px;
    cursor:pointer;letter-spacing:2px;transition:all .3s;width:100%;
    text-shadow:0 0 8px rgba(0,229,255,.3);min-height:46px;
    position:relative;overflow:hidden;
}
.sys-btn::before{
    content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
    background:linear-gradient(90deg,transparent,rgba(0,229,255,.08),transparent);transition:left .5s;
}
.sys-btn:hover::before{left:100%}
.sys-btn:hover{background:rgba(0,229,255,.1);box-shadow:var(--glow2)}

/* ========== TODAY FEED ========== */
.today-feed{padding:clamp(10px,2.5vw,16px) clamp(12px,3vw,18px);max-height:400px;overflow-y:auto;-webkit-overflow-scrolling:touch}
.feed-item{padding:clamp(8px,2vw,12px) 0;border-bottom:1px solid rgba(79,195,247,.08);display:flex;gap:clamp(8px,2vw,14px);align-items:flex-start}
.feed-item:last-child{border:none}
.fi-icon{font-size:clamp(1rem,2.5vw,1.3rem);flex-shrink:0;margin-top:2px}
.fi-body{flex:1;min-width:0}
.fi-title{font-weight:600;font-size:clamp(.85rem,2vw,.95rem);color:var(--text);overflow-wrap:break-word}
.fi-detail{font-size:clamp(.72rem,1.8vw,.82rem);color:var(--dim);margin-top:2px}
.fi-reward{font-family:var(--mono);font-size:clamp(.7rem,1.8vw,.8rem);color:var(--green);margin-top:3px}
.fi-time{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-align:right;flex-shrink:0}
.fi-del{background:none;border:none;color:var(--red);cursor:pointer;font-size:.8rem;opacity:.5;transition:opacity .2s;min-width:30px;min-height:30px;display:flex;align-items:center;justify-content:center}
.fi-del:hover{opacity:1}

/* ========== SKILLS ========== */
.skills-list,.achieve-list{padding:clamp(10px,2.5vw,16px) clamp(12px,3vw,18px)}
.skill-item{padding:clamp(10px,2.5vw,14px) 0;border-bottom:1px solid rgba(79,195,247,.08);display:flex;gap:clamp(8px,2vw,14px);align-items:center}
.skill-item:last-child{border:none}
.si-icon{font-size:clamp(1.2rem,3vw,1.5rem);width:clamp(32px,8vw,40px);text-align:center;flex-shrink:0}
.si-body{flex:1;min-width:0}
.si-name{font-weight:600;font-size:clamp(.88rem,2vw,1rem);color:var(--blue)}
.si-type{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px;margin-top:2px}
.si-desc{font-size:clamp(.75rem,2vw,.85rem);color:var(--dim);margin-top:3px}
.skill-item.locked{opacity:.35}
.skill-item.locked .si-name{color:var(--dim)}

.ach-item{padding:clamp(8px,2vw,12px) 0;border-bottom:1px solid rgba(79,195,247,.08);display:flex;gap:clamp(8px,2vw,12px);align-items:center}
.ach-item:last-child{border:none}
.ach-item.locked{opacity:.3}
.ai-icon{font-size:clamp(1rem,2.5vw,1.3rem);flex-shrink:0}
.ai-body{flex:1;min-width:0}
.ai-name{font-weight:600;font-size:clamp(.82rem,2vw,.95rem)}
.ai-desc{font-size:clamp(.7rem,1.8vw,.8rem);color:var(--dim)}
.ai-status{font-family:var(--mono);font-size:clamp(.65rem,1.5vw,.75rem);color:var(--green);flex-shrink:0}
.ach-item.locked .ai-status{color:var(--dim)}

/* ========== CHARTS ========== */
.chart-wrap{padding:clamp(10px,2.5vw,18px);min-height:clamp(180px,40vw,250px)}
.chart-small{max-width:350px;margin:0 auto;min-height:clamp(160px,35vw,200px)}

/* ========== LIFETIME ========== */
.lifetime-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(6px,1.5vw,12px);padding:clamp(10px,2.5vw,18px)}
.lt-item{text-align:center;padding:clamp(8px,2vw,14px);background:rgba(13,21,48,.6);border-radius:6px;border:1px solid rgba(79,195,247,.06)}
.lt-val{font-family:var(--font);font-size:clamp(1rem,3vw,1.4rem);color:var(--blue);font-weight:700;display:block}
.lt-label{font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px}

/* ========== SYSTEM NOTIFICATION ========== */
.sys-notif{position:fixed;top:clamp(8px,2vw,20px);right:clamp(8px,2vw,20px);z-index:100;display:flex;flex-direction:column;gap:6px;pointer-events:none;max-width:calc(100vw - 16px)}
.notif{
    padding:clamp(10px,2.5vw,14px) clamp(14px,3vw,20px);
    background:rgba(8,16,40,.92);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
    border:1px solid var(--cyan);border-radius:6px;color:var(--cyan);
    font-family:var(--mono);font-size:clamp(.75rem,2vw,.85rem);
    box-shadow:0 0 20px rgba(0,229,255,.2),inset 0 0 20px rgba(0,229,255,.03);
    animation:notifIn .4s ease,notifOut .4s ease 2.6s forwards;pointer-events:auto;
    max-width:min(380px,calc(100vw - 24px));word-break:break-word;
    position:relative;overflow:hidden;
}
.notif::before{
    content:'';position:absolute;top:0;left:0;right:0;height:1px;
    background:linear-gradient(90deg,transparent,rgba(0,229,255,.4),transparent);
}
.notif.gold{border-color:var(--gold);color:var(--gold);box-shadow:0 0 20px rgba(255,215,64,.2),inset 0 0 20px rgba(255,215,64,.03)}
.notif.gold::before{background:linear-gradient(90deg,transparent,rgba(255,215,64,.4),transparent)}
.notif.red{border-color:var(--red);color:var(--red);box-shadow:0 0 20px rgba(255,82,82,.2)}
.notif.red::before{background:linear-gradient(90deg,transparent,rgba(255,82,82,.4),transparent)}
.notif.green{border-color:var(--green);color:var(--green);box-shadow:0 0 20px rgba(105,240,174,.2)}
.notif.green::before{background:linear-gradient(90deg,transparent,rgba(105,240,174,.4),transparent)}
.notif.blue{border-color:var(--blue);color:var(--blue);box-shadow:var(--glow)}
@keyframes notifIn{from{opacity:0;transform:translateX(50px)}to{opacity:1;transform:translateX(0)}}
@keyframes notifOut{from{opacity:1}to{opacity:0;transform:translateY(-10px)}}

/* ========== LEVEL UP ========== */
.level-up-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.94);display:flex;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}
.lu-box{text-align:center;max-width:420px;width:100%;padding:clamp(30px,6vw,50px) clamp(20px,5vw,40px);position:relative}
.lu-flash{position:absolute;inset:-100px;background:radial-gradient(circle,rgba(0,229,255,.12),transparent 70%);animation:luPulse 2s infinite}
@keyframes luPulse{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}
.lu-label{font-family:var(--font);font-size:clamp(.85rem,2vw,1rem);letter-spacing:clamp(4px,1.5vw,8px);color:var(--dim);margin-bottom:8px}
.lu-level{
    font-family:var(--font);font-size:clamp(3rem,12vw,5rem);font-weight:900;
    color:var(--cyan);
    text-shadow:0 0 40px var(--cyan),0 0 80px rgba(0,229,255,.3),0 0 120px rgba(0,229,255,.15);
    margin:8px 0;
}
.lu-sub{font-family:var(--mono);font-size:clamp(.8rem,2vw,.95rem);color:var(--gold);margin-bottom:16px;text-shadow:0 0 10px rgba(255,215,64,.3)}
.lu-wisdom{font-style:italic;color:var(--cyan);opacity:.7;font-size:clamp(.82rem,2vw,.95rem);margin-bottom:24px;line-height:1.6}

/* ========== RESPONSIVE ========== */
@media(max-width:768px){
    .stats-grid{grid-template-columns:repeat(2,1fr)}
    .gate-meta{grid-template-columns:1fr 1fr 1fr}
    .lf-two,.lf-three{grid-template-columns:1fr}
    .lifetime-grid{grid-template-columns:repeat(2,1fr)}
    .phys-form{grid-template-columns:1fr;gap:10px}
    .pp-stats{grid-template-columns:1fr 1fr}
}
@media(max-width:480px){
    .stats-grid{grid-template-columns:1fr 1fr}
    .gate-meta{grid-template-columns:1fr}
    .lifetime-grid{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:380px){
    .lifetime-grid{grid-template-columns:1fr 1fr}
    .pp-stats{grid-template-columns:1fr}
}

/* ========== DATA MANAGEMENT ========== */
.data-mgmt{display:flex;gap:clamp(6px,1.5vw,10px);padding:clamp(10px,2.5vw,18px);flex-wrap:wrap}
.dm-btn{flex:1;min-width:clamp(100px,30vw,140px);font-size:clamp(.7rem,1.8vw,.8rem)!important;padding:clamp(8px,2vw,10px) clamp(10px,2.5vw,16px)!important}
.dm-danger{border-color:var(--red)!important;color:var(--red)!important}
.dm-danger:hover{background:var(--red)!important;color:var(--dark)!important;box-shadow:0 0 15px rgba(255,82,82,.3)!important}

/* ========== FOOD AUTOCOMPLETE ========== */
.food-autocomplete-wrap{position:relative}
.food-suggestions{position:absolute;top:100%;left:0;right:0;z-index:50;max-height:220px;overflow-y:auto;background:var(--dark2);border:1px solid var(--border);border-top:none;border-radius:0 0 6px 6px;-webkit-overflow-scrolling:touch}
.food-sug-item{padding:clamp(8px,2vw,12px) clamp(10px,2.5vw,14px);cursor:pointer;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(79,195,247,.06);transition:background .15s;font-size:clamp(.82rem,2vw,.92rem)}
.food-sug-item:hover,.food-sug-item.active{background:rgba(79,195,247,.10)}
.food-sug-item:last-child{border:none}
.food-sug-name{color:var(--text);font-weight:600}
.food-sug-match{color:var(--blue)}
.food-sug-meta{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-align:right;white-space:nowrap}
.food-sug-macro{color:var(--blue);opacity:.8}

/* ========== ENERGY BALANCE ========== */
.energy-balance{padding:clamp(14px,3vw,20px) clamp(12px,3vw,18px)}
.eb-summary{display:grid;grid-template-columns:1fr auto 1fr;gap:clamp(8px,2vw,14px);align-items:center;text-align:center;margin-bottom:clamp(14px,3vw,20px)}
.eb-col{padding:clamp(10px,2.5vw,16px);background:var(--dark);border-radius:6px}
.eb-col-label{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.eb-col-val{font-family:var(--font);font-size:clamp(1.2rem,3.5vw,1.6rem);font-weight:700}
.eb-col-sub{font-size:clamp(.65rem,1.5vw,.75rem);color:var(--dim);margin-top:2px}
.eb-in .eb-col-val{color:var(--green)}
.eb-out .eb-col-val{color:var(--red)}
.eb-vs{font-family:var(--font);font-size:clamp(1rem,2.5vw,1.3rem);color:var(--dim);font-weight:700}
.eb-bar-wrap{margin-bottom:clamp(10px,2.5vw,16px)}
.eb-bar-labels{display:flex;justify-content:space-between;font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);margin-bottom:5px}
.eb-bar-track{position:relative;width:100%;height:clamp(12px,3vw,18px);background:var(--dark3);border-radius:9px;overflow:hidden;border:1px solid var(--border)}
.eb-bar-in{position:absolute;left:0;top:0;height:100%;background:linear-gradient(90deg,var(--green),rgba(105,240,174,.6));border-radius:9px;transition:width .6s}
.eb-bar-out{position:absolute;right:0;top:0;height:100%;background:linear-gradient(270deg,var(--red),rgba(255,82,82,.6));border-radius:9px;transition:width .6s}
.eb-verdict{text-align:center;padding:clamp(10px,2.5vw,16px);border:1px solid var(--border);border-radius:6px;margin-top:clamp(8px,2vw,12px)}
.eb-verdict-label{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);letter-spacing:2px;margin-bottom:4px}
.eb-verdict-val{font-family:var(--font);font-size:clamp(1rem,3vw,1.3rem);font-weight:700}
.eb-verdict-desc{font-size:clamp(.72rem,1.8vw,.82rem);color:var(--dim);margin-top:4px}
.eb-verdict.surplus{border-color:var(--green);background:rgba(105,240,174,.04)}
.eb-verdict.surplus .eb-verdict-val{color:var(--green)}
.eb-verdict.deficit{border-color:var(--red);background:rgba(255,82,82,.04)}
.eb-verdict.deficit .eb-verdict-val{color:var(--red)}
.eb-verdict.balanced{border-color:var(--blue);background:rgba(79,195,247,.04)}
.eb-verdict.balanced .eb-verdict-val{color:var(--blue)}
.eb-breakdown{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(6px,1.5vw,10px);margin-top:clamp(10px,2.5vw,14px)}
.eb-break-item{text-align:center;padding:clamp(6px,1.5vw,10px);background:var(--dark);border-radius:4px}
.eb-break-val{font-family:var(--font);font-size:clamp(.9rem,2.5vw,1.1rem);font-weight:700;color:var(--blue)}
.eb-break-label{font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);text-transform:uppercase;letter-spacing:1px}

@media(max-width:480px){
    .eb-summary{grid-template-columns:1fr;gap:8px}
    .eb-vs{display:none}
    .eb-breakdown{grid-template-columns:1fr 1fr}
}
