/* ==========================================
   FEATURES.CSS â€” Shadow Missions, Boss Raid,
   Avatar, Login Rewards, Shadow Army,
   Shop, Decay System, Calendar, Sound Toggle
   ========================================== */

/* ========== WEEKLY MUSCLE COVERAGE ========== */
.muscle-coverage-grid{
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    gap:8px;padding:10px;
}
.mc-item{
    display:flex;flex-direction:column;align-items:center;
    padding:8px 4px;border-radius:8px;
    border:1px solid var(--border);
    background:rgba(255,255,255,.02);
    transition:all .3s;
}
.mc-hit{
    border-color:var(--green);
    background:rgba(76,175,80,.08);
}
.mc-partial{
    border-color:var(--gold);
    background:rgba(255,215,0,.06);
}
.mc-miss{
    border-color:var(--border);
    opacity:.6;
}
.mc-icon{ font-size:1.2rem;margin-bottom:2px; }
.mc-name{
    font-family:var(--heading);font-size:.7rem;
    color:var(--text);letter-spacing:.5px;
}
.mc-dots{
    font-size:.65rem;letter-spacing:2px;margin:2px 0;
    color:var(--dim);
}
.mc-hit .mc-dots{ color:var(--green); }
.mc-partial .mc-dots{ color:var(--gold); }
.mc-count{
    font-family:var(--mono);font-size:.6rem;
    color:var(--dim);
}
.mc-hit .mc-count{ color:var(--green); }
.mc-partial .mc-count{ color:var(--gold); }

/* ========== AVATAR ========== */
.avatar-wrap{
    display:flex;flex-direction:column;align-items:center;
    padding:clamp(14px,3vw,20px) 10px;margin-top:clamp(14px,3vw,20px);
    background:var(--panel);border:1px solid var(--border);border-radius:8px;
    position:relative;overflow:hidden;
    backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
}
.avatar-wrap::before{
    content:'';position:absolute;inset:0;
    background:radial-gradient(ellipse at 50% 80%,rgba(0,229,255,.04),transparent 60%);
    pointer-events:none;
}

.avatar-svg{
    width:clamp(110px,30vw,160px);height:clamp(220px,60vw,320px);
    filter:drop-shadow(0 0 8px rgba(79,195,247,0.15));
    transition:all .5s;
}

.avatar-rank-label{
    display:flex;flex-direction:column;align-items:center;gap:6px;
    margin-top:12px;
}

.rank-badge-sm{
    font-family:var(--font);font-size:clamp(.75rem,2vw,.9rem);font-weight:700;
    padding:3px 12px;border:2px solid var(--blue);border-radius:6px;
    letter-spacing:3px;
}

.arl-title{
    font-family:var(--mono);font-size:.75rem;color:var(--dim);
    letter-spacing:1px;
}

.avatar-stats{
    width:100%;max-width:220px;margin-top:16px;
    display:flex;flex-direction:column;gap:6px;
}

.avs-row{
    display:flex;align-items:center;gap:8px;
}

.avs-name{
    font-family:var(--font);font-size:.6rem;letter-spacing:2px;
    color:var(--dim);width:30px;
}

.avs-track{
    flex:1;height:4px;background:var(--dark);border-radius:2px;overflow:hidden;
}

.avs-fill{
    height:100%;border-radius:2px;transition:width .5s;
}

.avs-str{background:linear-gradient(90deg,#c62828,#ff5252)}
.avs-agi{background:linear-gradient(90deg,#f9a825,#ffd740)}
.avs-vit{background:linear-gradient(90deg,#2e7d32,#69f0ae)}

.avs-val{
    font-family:var(--font);font-size:.7rem;color:var(--text);width:28px;text-align:right;
}

/* Avatar animations */
.avatar-eye{animation:eyeBlink 4s infinite}
@keyframes eyeBlink{0%,96%,100%{opacity:1}97%,99%{opacity:0}}

.aura-pulse{animation:auraPulse 3s ease-in-out infinite}
@keyframes auraPulse{0%,100%{r:70;opacity:.3}50%{r:85;opacity:.1}}

.aura-pulse-delay{animation:auraPulse 3s ease-in-out infinite 1.5s}

.aura-breathe{animation:auraBreathe 4s ease-in-out infinite}
@keyframes auraBreathe{0%,100%{opacity:.6;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}

.aura-breathe-fast{animation:auraBreathe 2.5s ease-in-out infinite}

.avatar-particle{animation:avatarFloat 3s ease-in-out infinite}
@keyframes avatarFloat{0%,100%{transform:translateY(0);opacity:.4}50%{transform:translateY(-15px);opacity:.1}}

.avatar-body{animation:bodyIdle 5s ease-in-out infinite}
@keyframes bodyIdle{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

/* Rank-specific avatar glow */
.avatar-e .avatar-svg{filter:drop-shadow(0 0 5px rgba(120,144,156,0.1))}
.avatar-d .avatar-svg{filter:drop-shadow(0 0 8px rgba(102,187,106,0.15))}
.avatar-c .avatar-svg{filter:drop-shadow(0 0 12px rgba(66,165,245,0.2))}
.avatar-b .avatar-svg{filter:drop-shadow(0 0 15px rgba(171,71,188,0.25))}
.avatar-a .avatar-svg{filter:drop-shadow(0 0 20px rgba(255,167,38,0.3))}
.avatar-s .avatar-svg{filter:drop-shadow(0 0 25px rgba(255,215,64,0.35))}
.avatar-x .avatar-svg{filter:drop-shadow(0 0 30px rgba(255,23,68,0.4)) drop-shadow(0 0 60px rgba(213,0,0,0.2))}


/* ========== SHADOW MISSION OVERLAY ========== */
.sm-overlay{
    position:fixed;inset:0;z-index:8500;
    background:rgba(4,6,14,0.92);
    display:flex;align-items:center;justify-content:center;
    backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
}

.sm-box{
    background:var(--dark2);border:2px solid var(--red);border-radius:8px;
    padding:clamp(16px,4vw,30px);max-width:400px;width:92%;text-align:center;
    box-shadow:0 0 40px rgba(255,82,82,0.2);
    animation:smPulse 2s ease-in-out infinite;
}

@keyframes smPulse{0%,100%{box-shadow:0 0 40px rgba(255,82,82,0.2)}50%{box-shadow:0 0 60px rgba(255,82,82,0.35)}}

.sm-entrance{animation:smEnter .5s ease}
@keyframes smEnter{
    0%{opacity:0;transform:scale(1.3)}
    50%{opacity:1;transform:scale(0.95)}
    100%{transform:scale(1)}
}

.sm-alert{
    font-family:var(--mono);font-size:.7rem;letter-spacing:3px;
    color:var(--red);margin-bottom:12px;opacity:.7;
}

.sm-title{
    font-family:var(--font);font-size:clamp(1rem,3vw,1.3rem);font-weight:700;
    color:var(--red);text-shadow:0 0 15px rgba(255,82,82,0.4);
    margin-bottom:10px;letter-spacing:1px;
}

.sm-desc{
    font-size:clamp(.88rem,2.5vw,1rem);color:var(--text);margin-bottom:16px;line-height:1.5;
}

.sm-reward{
    font-family:var(--mono);font-size:.9rem;color:var(--gold);margin-bottom:20px;
}

.sm-timer-wrap{
    margin-bottom:20px;
}

.sm-timer-track{
    width:100%;height:8px;background:var(--dark);border-radius:4px;overflow:hidden;
    border:1px solid rgba(255,82,82,0.3);
}

.sm-timer-fill{
    height:100%;background:linear-gradient(90deg,var(--red),#ff9100);
    border-radius:4px;transition:width 1s linear;
}

.sm-timer-fill.sm-urgent{
    background:linear-gradient(90deg,#d50000,var(--red));
    animation:timerFlash .5s infinite;
}

@keyframes timerFlash{0%,100%{opacity:1}50%{opacity:.5}}

.sm-timer-text{
    font-family:var(--font);font-size:clamp(1.3rem,4vw,1.8rem);font-weight:700;
    color:var(--red);margin-top:8px;
}

.sm-buttons{
    display:flex;gap:8px;justify-content:center;flex-wrap:wrap;
}

.sm-btn-accept{
    font-family:var(--mono);font-size:clamp(.78rem,2vw,.9rem);padding:12px clamp(18px,4vw,28px);
    background:transparent;border:2px solid var(--green);color:var(--green);
    border-radius:4px;cursor:pointer;transition:all .3s;
    min-height:46px;
}

.sm-btn-accept:hover,.sm-btn-accept:active{
    background:var(--green);color:var(--dark);
}

.sm-btn-skip{
    font-family:var(--mono);font-size:clamp(.78rem,2vw,.9rem);padding:12px clamp(14px,3vw,20px);
    background:transparent;border:1px solid var(--dim);color:var(--dim);
    border-radius:4px;cursor:pointer;transition:all .3s;
    min-height:46px;
}

.sm-btn-skip:hover{border-color:var(--red);color:var(--red)}


/* ========== BOSS RAID ========== */
.boss-window{
    background:linear-gradient(135deg,var(--panel),rgba(255,82,82,0.04));
    border:1px solid rgba(255,82,82,0.2);border-radius:8px;
    margin-top:clamp(14px,3vw,20px);overflow:hidden;
    position:relative;
}
.boss-window::before{
    content:'';position:absolute;top:0;left:0;right:0;height:1px;
    background:linear-gradient(90deg,transparent,rgba(255,82,82,.3),transparent);
    pointer-events:none;
}

.boss-header{
    display:flex;justify-content:space-between;align-items:center;
    padding:clamp(8px,2vw,12px) clamp(12px,3vw,18px);background:rgba(255,82,82,0.06);
    border-bottom:1px solid rgba(255,82,82,0.15);
}

.boss-header-title{
    font-family:var(--mono);font-size:clamp(.75rem,2vw,.9rem);color:var(--red);letter-spacing:1px;
}

.boss-rank{
    font-family:var(--font);font-size:.75rem;color:var(--dim);
    border:1px solid var(--dim);padding:2px 8px;border-radius:4px;
}

.boss-body{
    padding:clamp(12px,3vw,18px);text-align:center;
}

.boss-icon{
    width:clamp(80px,18vw,120px);height:clamp(80px,18vw,120px);
    margin:0 auto 8px;
    filter:drop-shadow(0 0 12px rgba(255,82,82,0.4));
    animation:bossFloat 3s ease-in-out infinite;
}
.boss-icon img{
    width:100%;height:100%;object-fit:contain;
    border-radius:50%;
    filter:drop-shadow(0 0 8px rgba(255,82,82,0.5));
}

@keyframes bossFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

.boss-name{
    font-family:var(--font);font-size:clamp(1rem,3vw,1.3rem);font-weight:700;
    color:var(--red);text-shadow:0 0 15px rgba(255,82,82,0.3);
    margin-bottom:12px;letter-spacing:1px;
}

.boss-hp-info{
    display:flex;justify-content:space-between;
    font-family:var(--mono);font-size:.75rem;color:var(--dim);
    margin-bottom:6px;
}

.boss-hp-track{
    width:100%;height:14px;background:var(--dark);border-radius:7px;
    overflow:hidden;border:1px solid rgba(255,82,82,0.2);
}

.boss-hp-fill{
    height:100%;border-radius:7px;transition:width .5s;
    background:linear-gradient(90deg,#b71c1c,#f44336,#ff5252);
}

.boss-defeated-label{
    margin-top:12px;font-family:var(--font);font-size:1rem;
    color:var(--green);letter-spacing:2px;
}

.boss-reward-preview{
    margin-top:10px;font-family:var(--mono);font-size:.8rem;
    color:var(--dim);
}

.boss-damage-hint{
    margin-top:10px;font-family:var(--mono);font-size:.7rem;
    color:var(--dim);opacity:.6;
    font-style:italic;
}


/* ========== SHADOW ARMY ========== */
.army-window{
    margin-top:clamp(14px,3vw,20px);background:var(--panel);
    border:1px solid rgba(0,229,255,0.15);border-radius:8px;
    overflow:hidden;position:relative;
    backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
}
.army-window::before{
    content:'';position:absolute;inset:0;
    background:radial-gradient(ellipse at 50% 100%,rgba(0,229,255,.03),transparent 60%);
    pointer-events:none;
}

.army-header{
    font-family:var(--mono);font-size:clamp(.75rem,2vw,.9rem);padding:clamp(8px,2vw,12px) clamp(12px,3vw,18px);
    color:var(--cyan);background:rgba(0,229,255,0.04);
    border-bottom:1px solid var(--border);letter-spacing:1px;
    text-shadow:0 0 10px rgba(0,229,255,.3);
}

.army-body{
    padding:clamp(12px,3vw,18px);display:flex;align-items:center;gap:clamp(10px,2.5vw,20px);flex-wrap:wrap;
}

.army-icon{
    font-size:2.5rem;
    filter:drop-shadow(0 0 8px rgba(79,195,247,0.3));
}

.army-info{flex:1}

.army-count{
    font-family:var(--font);font-size:clamp(1.4rem,4vw,2rem);font-weight:700;
    color:var(--blue);text-shadow:0 0 10px rgba(79,195,247,0.3);
}

.army-rank-name{
    font-family:var(--mono);font-size:.8rem;color:var(--dim);
    margin-top:4px;
}

.army-visual{
    display:flex;gap:3px;flex-wrap:wrap;max-width:120px;
}

.army-soldier{
    width:8px;height:8px;background:var(--blue);border-radius:2px;
    opacity:.6;animation:soldierPulse 2s ease-in-out infinite;
}

.army-soldier:nth-child(odd){animation-delay:.5s}
.army-soldier:nth-child(3n){animation-delay:1s}

@keyframes soldierPulse{0%,100%{opacity:.4}50%{opacity:.8}}


/* ========== LOGIN REWARD OVERLAY ========== */
.lr-overlay{
    position:fixed;inset:0;z-index:8600;
    background:rgba(4,6,14,0.9);
    display:flex;align-items:center;justify-content:center;
    backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
}

.lr-box{
    background:var(--dark2);border:2px solid var(--gold);border-radius:8px;
    padding:clamp(16px,4vw,30px);max-width:420px;width:92%;text-align:center;
    box-shadow:0 0 40px rgba(255,215,64,0.15);
}

.lr-title{
    font-family:var(--font);font-size:clamp(.9rem,2.5vw,1.1rem);font-weight:700;
    color:var(--gold);letter-spacing:clamp(1px,0.5vw,3px);margin-bottom:6px;
}

.lr-streak{
    font-family:var(--mono);font-size:.85rem;color:var(--dim);
    margin-bottom:20px;
}

.lr-grid{
    display:grid;grid-template-columns:repeat(7,1fr);gap:6px;
    margin-bottom:20px;
}

.lr-day{
    padding:8px 4px;border-radius:4px;border:1px solid var(--border);
    background:var(--dark);
}

.lr-day-num{
    font-family:var(--mono);font-size:.55rem;color:var(--dim);
    margin-bottom:4px;
}

.lr-day-icon{
    font-size:1.2rem;margin-bottom:2px;
}

.lr-day-val{
    font-family:var(--mono);font-size:.55rem;color:var(--dim);
}

.lr-claimed{
    border-color:var(--green);background:rgba(105,240,174,0.08);
}

.lr-claimed .lr-day-val{color:var(--green)}

.lr-today{
    border-color:var(--gold);background:rgba(255,215,64,0.1);
    box-shadow:0 0 10px rgba(255,215,64,0.2);
    animation:lrPulse 1.5s ease-in-out infinite;
}

@keyframes lrPulse{0%,100%{box-shadow:0 0 10px rgba(255,215,64,0.2)}50%{box-shadow:0 0 20px rgba(255,215,64,0.35)}}

.lr-today .lr-day-val{color:var(--gold);font-weight:600}

.lr-locked{opacity:.4}

.lr-reward{
    font-family:var(--font);font-size:1.2rem;font-weight:700;
    color:var(--gold);margin-bottom:20px;
    text-shadow:0 0 15px rgba(255,215,64,0.3);
}

/* ========== RESET CONFIRM MODAL ========== */
.reset-overlay{
    position:fixed;inset:0;z-index:9500;
    background:rgba(4,6,14,0.95);
    display:flex;align-items:center;justify-content:center;
    backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
}

.reset-box{
    background:var(--dark2);border:2px solid var(--red);border-radius:8px;
    padding:clamp(16px,4vw,30px);max-width:400px;width:92%;text-align:center;
    box-shadow:0 0 60px rgba(255,82,82,0.3);
    animation:resetPulse 2s ease-in-out infinite;
}

@keyframes resetPulse{0%,100%{box-shadow:0 0 40px rgba(255,82,82,0.2)}50%{box-shadow:0 0 80px rgba(255,82,82,0.4)}}

.reset-icon{
    font-size:3rem;margin-bottom:10px;
    filter:drop-shadow(0 0 15px rgba(255,82,82,0.5));
}

.reset-title{
    font-family:var(--font);font-size:clamp(1.1rem,3vw,1.4rem);font-weight:700;
    color:var(--red);letter-spacing:3px;margin-bottom:12px;
    text-shadow:0 0 20px rgba(255,82,82,0.4);
}

.reset-msg{
    font-size:clamp(.82rem,2vw,.95rem);color:var(--text);line-height:1.6;
    margin-bottom:20px;opacity:.85;
}

.reset-buttons{
    display:flex;flex-direction:column;gap:10px;
}

.reset-btn-danger{
    background:transparent !important;
    border:2px solid var(--red) !important;
    color:var(--red) !important;
    padding:14px 20px !important;font-size:.95rem !important;
    min-height:48px;
    transition:all .3s;
}

.reset-btn-danger:hover,.reset-btn-danger:active{
    background:var(--red) !important;
    color:var(--dark) !important;
}

.reset-btn-cancel{
    background:transparent !important;
    border:1px solid var(--dim) !important;
    color:var(--dim) !important;
    padding:12px 20px !important;font-size:.9rem !important;
    min-height:46px;
    transition:all .3s;
}

.reset-btn-cancel:hover{
    border-color:var(--blue) !important;
    color:var(--blue) !important;
}

/* ========== MOBILE ADJUSTMENTS ========== */
@media(max-width:480px){
    .avatar-svg{width:clamp(100px,28vw,130px);height:clamp(200px,56vw,260px)}
    .sm-box{padding:16px}
    .sm-title{font-size:1rem}
    .sm-timer-text{font-size:1.2rem}
    .lr-grid{grid-template-columns:repeat(7,1fr);gap:3px}
    .lr-day{padding:5px 2px}
    .lr-day-num{font-size:.45rem}
    .lr-day-icon{font-size:.9rem}
    .lr-day-val{font-size:.45rem}
    .boss-icon{width:70px;height:70px}
    .boss-name{font-size:1rem}
    .army-body{flex-wrap:wrap;gap:10px}
    .army-icon{font-size:2rem}
}

/* ========== SHOP ========== */

/* Equipped weapon window */
.shop-equipped-window .sw-body{padding:clamp(8px,2vw,12px) clamp(12px,3vw,18px)}
.equipped-display{display:flex;align-items:center;gap:clamp(8px,2vw,14px);flex-wrap:wrap}
.equipped-icon{font-size:clamp(1.6rem,4vw,2.2rem);filter:drop-shadow(0 0 8px rgba(255,215,64,.3))}
.equipped-info{flex:1;min-width:0}
.equipped-name{font-family:var(--font);font-size:clamp(.9rem,2.5vw,1.1rem);color:var(--gold);font-weight:700;letter-spacing:1px}
.equipped-tier{font-family:var(--mono);font-size:clamp(.72rem,1.8vw,.85rem);color:var(--gold);opacity:.7;letter-spacing:2px}
.equipped-empty{font-family:var(--mono);font-size:clamp(.72rem,1.8vw,.85rem);color:var(--dim);text-align:center;padding:10px;width:100%}

/* Shop banner */
.shop-header-panel{background:var(--panel);border:1px solid var(--border);border-radius:4px;overflow:hidden}
.shop-banner{display:flex;align-items:center;gap:clamp(10px,2.5vw,16px);padding:clamp(14px,3vw,20px);background:linear-gradient(135deg,rgba(255,215,64,.06),rgba(79,195,247,.04))}
.shop-banner-icon{font-size:clamp(1.8rem,5vw,2.5rem);filter:drop-shadow(0 0 10px rgba(255,215,64,.4))}
.shop-banner-title{font-family:var(--font);font-size:clamp(.95rem,2.5vw,1.3rem);color:var(--gold);font-weight:700;letter-spacing:clamp(2px,0.5vw,4px);text-shadow:0 0 20px rgba(255,215,64,.3)}
.shop-banner-sub{font-family:var(--mono);font-size:clamp(.65rem,1.5vw,.75rem);color:var(--dim);letter-spacing:1px;margin-top:3px}

.shop-stats-row{display:grid;grid-template-columns:1fr 1fr;border-top:1px solid var(--border)}
.shop-stat{display:flex;flex-direction:column;align-items:center;gap:2px;padding:clamp(10px,2vw,14px);text-align:center}
.shop-stat:first-child{border-right:1px solid var(--border)}
.shop-stat-icon{font-size:clamp(1rem,2.5vw,1.2rem)}
.shop-stat-val{font-family:var(--font);font-size:clamp(1.1rem,3vw,1.4rem);font-weight:700}
.shop-stat-label{font-family:var(--mono);font-size:clamp(.55rem,1.3vw,.65rem);color:var(--dim);text-transform:uppercase;letter-spacing:2px}

/* Shop filters */
.shop-filters{display:flex;gap:5px;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;padding-bottom:4px}
.shop-filters::-webkit-scrollbar{display:none}
.shop-filter-btn{
    font-family:var(--mono);font-size:clamp(.68rem,1.5vw,.78rem);
    padding:clamp(6px,1.5vw,8px) clamp(10px,2vw,14px);background:var(--panel);
    border:1px solid var(--border);border-radius:4px;
    color:var(--dim);cursor:pointer;
    transition:all .3s;letter-spacing:1px;
    white-space:nowrap;flex-shrink:0;min-height:38px;
}
.shop-filter-btn:hover{color:var(--text);border-color:var(--blue)}
.shop-filter-btn.active{color:var(--gold);border-color:var(--gold);background:rgba(255,215,64,.08);text-shadow:0 0 8px rgba(255,215,64,.3)}

/* Shop item cards */
.shop-grid{display:flex;flex-direction:column;gap:10px;margin-top:16px}

.shop-item{
    background:var(--panel);border:1px solid var(--border);
    border-radius:6px;padding:clamp(10px,2.5vw,16px);
    display:flex;gap:clamp(8px,2vw,14px);align-items:flex-start;
    transition:all .3s;position:relative;overflow:hidden;
}
.shop-item:hover{border-color:var(--blue);transform:translateX(3px)}
.shop-item[data-tier="4"]{border-color:rgba(179,136,255,.3)}
.shop-item[data-tier="5"]{border-color:rgba(255,215,64,.3)}
.shop-item[data-tier="6"]{border-color:rgba(255,215,64,.5);box-shadow:0 0 15px rgba(255,215,64,.1)}

.shop-item.shop-owned{opacity:.6;border-color:var(--green)}
.shop-item.shop-owned:hover{opacity:.8}
.shop-item.shop-locked{opacity:.35}

.shop-item-icon{
    font-size:clamp(1.5rem,4vw,2rem);flex-shrink:0;width:clamp(36px,8vw,44px);text-align:center;
    filter:drop-shadow(0 0 6px rgba(255,215,64,.2));
    margin-top:2px;
}
.shop-locked .shop-item-icon{filter:grayscale(1) brightness(0.5)}

.shop-item-body{flex:1;min-width:0}
.shop-item-header{display:flex;justify-content:space-between;align-items:baseline;gap:6px;flex-wrap:wrap}
.shop-item-name{font-weight:700;font-size:clamp(.88rem,2vw,1rem);color:var(--text)}
.shop-item-tier{font-family:var(--mono);font-size:clamp(.6rem,1.5vw,.7rem);color:var(--gold);letter-spacing:1px;opacity:.6}
.shop-item-desc{font-size:clamp(.72rem,1.8vw,.82rem);color:var(--dim);margin-top:3px;line-height:1.5;font-style:italic}

.shop-item-meta{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap;align-items:center}
.shop-item-cat{
    font-family:var(--mono);font-size:.6rem;
    padding:2px 8px;border:1px solid var(--border);
    border-radius:3px;color:var(--dim);letter-spacing:1px;
}
.shop-item-rank{
    font-family:var(--font);font-size:.6rem;
    padding:2px 8px;border-radius:3px;letter-spacing:1px;
}
.rank-tag-e{color:#4fc3f7;border:1px solid rgba(79,195,247,.4)}
.rank-tag-d{color:#69f0ae;border:1px solid rgba(105,240,174,.4)}
.rank-tag-c{color:#ffd740;border:1px solid rgba(255,215,64,.4)}
.rank-tag-b{color:#b388ff;border:1px solid rgba(179,136,255,.4)}
.rank-tag-a{color:#ff5252;border:1px solid rgba(255,82,82,.4)}
.rank-tag-s{color:#ffd740;border:1px solid var(--gold);background:rgba(255,215,64,.1);text-shadow:0 0 6px rgba(255,215,64,.4)}
.rank-tag-x{color:#ff1744;border:1px solid #ff1744;background:rgba(255,23,68,.12);text-shadow:0 0 8px rgba(255,23,68,.5);box-shadow:0 0 10px rgba(213,0,0,.2)}
.rank-tag-x{color:#ff1744;border:1px solid #ff1744;background:rgba(255,23,68,.12);text-shadow:0 0 8px rgba(255,23,68,.5);box-shadow:0 0 10px rgba(213,0,0,.2)}
.shop-item-cost{font-family:var(--font);font-size:.75rem;color:var(--gold);font-weight:600}

.shop-item-actions{
    display:flex;flex-direction:column;gap:6px;
    align-items:flex-end;flex-shrink:0;
    min-width:90px;
}

.shop-status-owned{
    font-family:var(--mono);font-size:.75rem;
    color:var(--green);letter-spacing:1px;
}
.shop-status-locked{
    font-family:var(--mono);font-size:.7rem;
    color:var(--red);opacity:.7;letter-spacing:1px;
}
.shop-status-qty{
    font-family:var(--mono);font-size:.75rem;
    color:var(--blue);letter-spacing:1px;
}

.shop-buy-btn{
    font-family:var(--mono);font-size:.72rem;
    padding:7px 14px;background:transparent;
    border:1px solid var(--gold);color:var(--gold);
    border-radius:4px;cursor:pointer;
    transition:all .3s;letter-spacing:1px;
    white-space:nowrap;
}
.shop-buy-btn:hover{background:var(--gold);color:var(--dark);box-shadow:0 0 12px rgba(255,215,64,.3)}
.shop-buy-btn.disabled{opacity:.3;cursor:not-allowed;pointer-events:none}

.shop-equip-btn{
    font-family:var(--mono);font-size:.72rem;
    padding:7px 14px;background:transparent;
    border:1px solid var(--blue);color:var(--blue);
    border-radius:4px;cursor:pointer;
    transition:all .3s;letter-spacing:1px;
}
.shop-equip-btn:hover{background:var(--blue);color:var(--dark)}

.shop-use-btn{
    font-family:var(--mono);font-size:.72rem;
    padding:7px 14px;background:transparent;
    border:1px solid var(--green);color:var(--green);
    border-radius:4px;cursor:pointer;
    transition:all .3s;letter-spacing:1px;
}
.shop-use-btn:hover{background:var(--green);color:var(--dark)}

.shop-equipped-badge{
    font-family:var(--mono);font-size:.7rem;
    color:var(--gold);letter-spacing:1px;
    padding:4px 10px;border:1px solid var(--gold);
    border-radius:4px;background:rgba(255,215,64,.08);
}

/* Shop glow animation for legendary items */
.shop-item[data-tier="6"]::before{
    content:'';position:absolute;inset:-2px;
    background:linear-gradient(45deg,transparent,rgba(255,215,64,.1),transparent);
    animation:shopGlow 3s ease infinite;
    pointer-events:none;
}
@keyframes shopGlow{
    0%,100%{opacity:0}
    50%{opacity:1}
}

/* Shop responsive */
@media(max-width:480px){
    .shop-item{flex-wrap:wrap;padding:10px}
    .shop-item-actions{
        width:100%;flex-direction:row;
        justify-content:flex-end;margin-top:6px;
        gap:8px;
    }
    .shop-banner{padding:12px}
    .shop-banner-title{font-size:.9rem;letter-spacing:2px}
    .shop-banner-icon{font-size:1.6rem}
    .shop-buy-btn,.shop-equip-btn,.shop-use-btn{
        min-height:40px;
        padding:8px 12px;
    }
    .equipped-display{flex-wrap:wrap;gap:10px}
    .equipped-icon{font-size:1.6rem}
    .equipped-name{font-size:.95rem}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DECAY / DEGRADATION OVERLAY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.decay-overlay{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(10,0,0,0.96);
    display:flex;align-items:center;justify-content:center;
    z-index:10000;
    animation:decayFadeIn .6s ease-out;
    backdrop-filter:blur(6px);
}
@keyframes decayFadeIn{
    from{opacity:0}to{opacity:1}
}

.decay-box{
    background:linear-gradient(135deg,#1a0000 0%,#0d0d0d 50%,#1a0000 100%);
    border:2px solid #ff1a1a;
    border-radius:16px;
    padding:clamp(18px,4vw,32px) clamp(14px,3vw,28px);
    max-width:460px;width:92%;
    text-align:center;
    box-shadow:0 0 60px rgba(255,26,26,0.3),
               0 0 120px rgba(255,0,0,0.15),
               inset 0 0 40px rgba(255,0,0,0.05);
    animation:decayPulse 2s ease-in-out infinite alternate;
    position:relative;
    overflow:hidden;
}
@keyframes decayPulse{
    from{box-shadow:0 0 60px rgba(255,26,26,0.3),0 0 120px rgba(255,0,0,0.15),inset 0 0 40px rgba(255,0,0,0.05)}
    to{box-shadow:0 0 80px rgba(255,26,26,0.5),0 0 160px rgba(255,0,0,0.25),inset 0 0 60px rgba(255,0,0,0.1)}
}

/* Scanline effect over box */
.decay-box::before{
    content:'';position:absolute;top:0;left:0;width:100%;height:100%;
    background:repeating-linear-gradient(
        0deg,
        transparent,transparent 2px,
        rgba(255,0,0,0.03) 2px,rgba(255,0,0,0.03) 4px
    );
    pointer-events:none;z-index:1;
}

.decay-glitch{
    font-family:'Share Tech Mono',monospace;
    font-size:.85rem;letter-spacing:4px;
    color:#ff3333;
    text-transform:uppercase;
    margin-bottom:12px;
    animation:glitchFlicker 1.5s infinite;
}
@keyframes glitchFlicker{
    0%,100%{opacity:1;text-shadow:0 0 8px #ff0000}
    10%{opacity:.8;text-shadow:-2px 0 #ff0000,2px 0 #0ff}
    20%{opacity:1;text-shadow:0 0 8px #ff0000}
    50%{opacity:.9;text-shadow:1px 0 #ff0000,-1px 0 #0ff}
    80%{opacity:1}
}

.decay-title{
    font-family:'Orbitron',sans-serif;
    font-size:clamp(1.1rem,3.5vw,1.6rem);font-weight:700;
    color:#ff4444;
    margin-bottom:6px;
    text-shadow:0 0 20px rgba(255,0,0,0.6);
    position:relative;z-index:2;
}

.decay-subtitle{
    font-family:'Rajdhani',sans-serif;
    font-size:.9rem;font-style:italic;
    color:#994444;
    margin-bottom:20px;
    position:relative;z-index:2;
}

.decay-losses{
    text-align:left;
    margin:0 auto 20px;
    max-width:380px;
    position:relative;z-index:2;
}

.decay-loss-item{
    font-family:'Share Tech Mono',monospace;
    font-size:clamp(.72rem,1.8vw,.82rem);
    color:#cc4444;
    padding:clamp(6px,1.5vw,8px) clamp(8px,2vw,12px);
    margin-bottom:5px;
    background:rgba(255,0,0,0.06);
    border-left:3px solid #ff3333;
    border-radius:0 6px 6px 0;
    display:flex;align-items:center;gap:8px;
    transition:background .2s;
}
.decay-loss-item:hover{
    background:rgba(255,0,0,0.12);
}
.decay-loss-item .decay-icon{
    font-size:1rem;flex-shrink:0;
}

/* Critical losses â€” stat decay, army desertion */
.decay-loss-critical{
    color:#ff2222;
    border-left-color:#ff0000;
    background:rgba(255,0,0,0.1);
    text-shadow:0 0 6px rgba(255,0,0,0.4);
    animation:criticalPulse 1.8s ease-in-out infinite alternate;
}
@keyframes criticalPulse{
    from{background:rgba(255,0,0,0.08)}
    to{background:rgba(255,0,0,0.16)}
}

/* Penalty quest warning line */
.decay-loss-penalty{
    color:#ff9900;
    border-left-color:#ff8800;
    background:rgba(255,153,0,0.08);
}

.decay-quote{
    font-family:'Rajdhani',sans-serif;
    font-size:.8rem;font-style:italic;
    color:#663333;
    margin-bottom:20px;
    position:relative;z-index:2;
}

.decay-close-btn{
    font-family:'Orbitron',sans-serif;
    font-size:.85rem;font-weight:600;
    letter-spacing:2px;text-transform:uppercase;
    color:#ff4444;
    background:transparent;
    border:2px solid #ff3333;
    border-radius:8px;
    padding:12px 32px;
    cursor:pointer;
    transition:all .3s ease;
    position:relative;z-index:2;
}
.decay-close-btn:hover{
    background:rgba(255,51,51,0.15);
    box-shadow:0 0 20px rgba(255,0,0,0.3);
    transform:scale(1.05);
}
.decay-close-btn:active{
    transform:scale(0.97);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PENALTY QUEST ITEMS IN QUEST LIST
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.quest-penalty{
    border:1px solid #cc2200 !important;
    background:linear-gradient(135deg,rgba(180,20,0,0.12) 0%,rgba(40,0,0,0.25) 100%) !important;
    position:relative;
}
.quest-penalty::before{
    content:'ğŸ’€';
    position:absolute;top:8px;right:10px;
    font-size:1.1rem;opacity:.6;
    animation:skullPulse 2s ease-in-out infinite alternate;
}
@keyframes skullPulse{
    from{opacity:.4;transform:scale(1)}
    to{opacity:.8;transform:scale(1.15)}
}
.quest-penalty .quest-name{
    color:#ff4444 !important;
}
.quest-penalty .quest-reward{
    color:#996633 !important;
    font-style:italic;
}

/* Decay overlay responsive */
@media(max-width:600px){
    .decay-box{padding:16px 12px}
    .decay-glitch{font-size:.7rem;letter-spacing:2px}
    .decay-close-btn{padding:10px 20px;font-size:.75rem}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOGIN SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.login-screen{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:linear-gradient(135deg,#020510 0%,#060d1f 40%,#0d1220 100%);
    display:flex;align-items:center;justify-content:center;
    z-index:20000;
    overflow:hidden;
}

.login-particles{
    position:absolute;top:0;left:0;width:100%;height:100%;
    background:
        radial-gradient(1.5px 1.5px at 10% 20%, rgba(0,229,255,0.4), transparent),
        radial-gradient(1px 1px at 30% 60%, rgba(0,229,255,0.3), transparent),
        radial-gradient(1.5px 1.5px at 50% 30%, rgba(79,195,247,0.2), transparent),
        radial-gradient(1px 1px at 70% 80%, rgba(0,229,255,0.3), transparent),
        radial-gradient(1.5px 1.5px at 90% 40%, rgba(0,229,255,0.4), transparent),
        radial-gradient(2px 2px at 20% 70%, rgba(124,77,255,0.2), transparent),
        radial-gradient(2px 2px at 80% 10%, rgba(124,77,255,0.2), transparent);
    animation:loginParticles 8s ease-in-out infinite alternate;
}
@keyframes loginParticles{
    from{opacity:.5;transform:translateY(0)}
    to{opacity:1;transform:translateY(-10px)}
}

.login-box{
    background:rgba(8,16,40,0.88);
    border:1px solid rgba(0,229,255,0.2);
    border-radius:16px;
    padding:clamp(24px,5vw,40px) clamp(18px,4vw,36px);
    max-width:420px;width:92%;
    text-align:center;
    box-shadow:
        0 0 60px rgba(0,229,255,0.06),
        0 0 120px rgba(0,229,255,0.03),
        inset 0 1px 0 rgba(0,229,255,0.1);
    position:relative;z-index:1;
    animation:loginFadeIn .8s ease-out;
    backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
}
@keyframes loginFadeIn{
    from{opacity:0;transform:translateY(20px)}
    to{opacity:1;transform:translateY(0)}
}

.login-glitch{
    font-family:'Orbitron',sans-serif;
    font-size:clamp(1.8rem,7vw,2.8rem);font-weight:900;
    letter-spacing:clamp(5px,2vw,10px);
    color:#00e5ff;
    text-shadow:0 0 30px rgba(0,229,255,0.6),0 0 80px rgba(0,229,255,0.25),0 0 120px rgba(0,229,255,0.1);
    margin-bottom:8px;
    animation:loginGlitch 3s infinite;
    position:relative;
}
@keyframes loginGlitch{
    0%,100%{text-shadow:0 0 30px rgba(0,229,255,0.6),0 0 80px rgba(0,229,255,0.25)}
    5%{text-shadow:-3px 0 #00e5ff,3px 0 #ff0040}
    10%{text-shadow:0 0 30px rgba(0,229,255,0.6),0 0 80px rgba(0,229,255,0.25)}
    50%{text-shadow:2px 0 #00e5ff,-2px 0 #ff0040}
    55%{text-shadow:0 0 30px rgba(0,229,255,0.6)}
}

.login-line{
    width:60%;height:2px;
    background:linear-gradient(90deg,transparent,rgba(0,229,255,0.5),transparent);
    margin:12px auto 16px;
    box-shadow:0 0 10px rgba(0,229,255,.2);
}

.login-subtitle{
    font-family:'Share Tech Mono',monospace;
    font-size:clamp(.65rem,1.8vw,.8rem);letter-spacing:clamp(1px,0.5vw,3px);
    color:rgba(0,229,255,0.5);
    text-transform:uppercase;
    margin-bottom:clamp(18px,4vw,32px);
}

.login-btn{
    display:flex;align-items:center;justify-content:center;gap:10px;
    width:100%;
    padding:clamp(10px,2.5vw,14px) clamp(14px,3vw,20px);
    border-radius:10px;
    font-family:'Rajdhani',sans-serif;
    font-size:clamp(.88rem,2.5vw,1rem);font-weight:600;
    cursor:pointer;
    transition:all .3s ease;
    border:none;
    letter-spacing:.5px;
    min-height:48px;
}

.login-btn-google{
    background:#fff;
    color:#333;
    box-shadow:0 2px 12px rgba(0,0,0,0.3);
}
.login-btn-google:hover{
    background:#f0f0f0;
    box-shadow:0 4px 20px rgba(79,195,247,0.2);
    transform:translateY(-2px);
}
.login-btn-google:active{transform:translateY(0)}

.google-icon{
    width:20px;height:20px;
}

.login-btn-spinner{
    display:inline-block;width:16px;height:16px;
    border:2px solid #ccc;border-top-color:#333;
    border-radius:50%;
    animation:spin .6s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

.login-divider{
    display:flex;align-items:center;gap:12px;
    margin:24px 0;
}
.login-divider-line{
    flex:1;height:1px;
    background:rgba(79,195,247,0.15);
}
.login-divider-text{
    font-family:'Share Tech Mono',monospace;
    font-size:.75rem;color:rgba(79,195,247,0.3);
    letter-spacing:2px;
}

.login-guest{
    display:flex;flex-direction:column;gap:10px;
}

.login-input{
    width:100%;
    padding:clamp(10px,2.5vw,12px) clamp(12px,3vw,16px);
    background:rgba(0,229,255,0.04);
    border:1px solid rgba(0,229,255,0.2);
    border-radius:8px;
    color:#e0e0e0;
    font-family:'Share Tech Mono',monospace;
    font-size:clamp(.82rem,2vw,.9rem);
    letter-spacing:1px;
    outline:none;
    transition:border-color .3s,box-shadow .3s;
    box-sizing:border-box;
    min-height:46px;
}
.login-input:focus{
    border-color:rgba(0,229,255,0.5);
    box-shadow:0 0 15px rgba(0,229,255,0.15);
}
.login-input::placeholder{
    color:rgba(0,229,255,0.3);
}

.login-btn-guest{
    background:transparent;
    color:#00e5ff;
    border:1px solid rgba(0,229,255,0.3);
    letter-spacing:2px;
    font-family:'Orbitron',sans-serif;
    font-size:.8rem;
}
.login-btn-guest:hover{
    background:rgba(0,229,255,0.08);
    border-color:rgba(0,229,255,0.5);
    box-shadow:0 0 20px rgba(0,229,255,0.15);
}

.login-error{
    font-family:'Share Tech Mono',monospace;
    font-size:.78rem;
    color:#ff4444;
    margin-top:16px;
    padding:8px 12px;
    background:rgba(255,0,0,0.06);
    border-left:3px solid #ff3333;
    border-radius:0 6px 6px 0;
    text-align:left;
}

.login-footer{
    margin-top:24px;
    padding-top:16px;
    border-top:1px solid rgba(79,195,247,0.08);
}

.login-note{
    font-family:'Rajdhani',sans-serif;
    font-size:.75rem;
    color:rgba(79,195,247,0.35);
    margin:4px 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   USER PROFILE IN HEADER & SYNC INDICATOR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.user-avatar{
    width:26px;height:26px;
    border-radius:50%;
    border:1px solid rgba(79,195,247,0.4);
    object-fit:cover;
}

.user-name{
    font-family:'Rajdhani',sans-serif;
    font-size:.75rem;
    color:rgba(79,195,247,0.6);
    max-width:80px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
}

.hq-user{
    display:flex;align-items:center;gap:6px;
}

.hq-signout-btn{
    background:none;border:none;
    color:rgba(255,80,80,0.5);
    font-size:clamp(.88rem,2.5vw,1rem);
    cursor:pointer;
    padding:4px 6px;
    transition:color .3s,text-shadow .3s;
    line-height:1;
    min-width:36px;
    min-height:36px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.hq-signout-btn:hover{
    color:#ff4444;
    text-shadow:0 0 8px rgba(255,0,0,0.4);
}

.hq-link-btn{
    background:none;border:none;
    color:rgba(79,195,247,0.5);
    font-size:clamp(.78rem,2vw,.9rem);
    cursor:pointer;
    padding:4px 6px;
    transition:color .3s;
    line-height:1;
    min-width:36px;
    min-height:36px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.hq-link-btn:hover{
    color:#4fc3f7;
    text-shadow:0 0 8px rgba(79,195,247,0.4);
}

.sync-indicator{
    font-size:.7rem;
    margin-left:6px;
    transition:color .3s;
}
.sync-saved{color:rgba(79,195,247,0.4)}
.sync-saving{color:#ffd740;animation:syncPulse .8s infinite}
.sync-error{color:#ff4444;animation:syncPulse 1s infinite}
.sync-offline{color:rgba(255,255,255,0.2)}

@keyframes syncPulse{
    0%,100%{opacity:1}
    50%{opacity:.3}
}

/* Login responsive */
@media(max-width:600px){
    .login-box{padding:22px 16px}
    .login-btn{padding:12px 14px;font-size:.88rem}
    .user-name{max-width:50px;font-size:.62rem}
    .user-avatar{width:22px;height:22px}
    .hq-signout-btn,.hq-link-btn{font-size:.85rem}
}
@media(max-width:380px){
    .login-box{padding:18px 12px}
    .login-divider{margin:16px 0}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SOUND TOGGLE BUTTON
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.hq-sound-btn{
    background:none;border:none;
    color:rgba(79,195,247,0.5);
    font-size:clamp(.88rem,2.5vw,1rem);
    cursor:pointer;
    padding:4px 6px;
    transition:color .3s,transform .2s;
    line-height:1;
    min-width:36px;
    min-height:36px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.hq-sound-btn:hover{
    color:#4fc3f7;
    transform:scale(1.15);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DUNGEON CALENDAR HEATMAP
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.heatmap-container{
    padding:clamp(10px,2.5vw,16px) clamp(6px,1.5vw,12px);
    position:relative;
}

.heatmap-year-nav{
    display:flex;align-items:center;justify-content:center;gap:clamp(10px,2.5vw,16px);
    margin-bottom:10px;
}
.heatmap-year{
    font-family:'Orbitron',sans-serif;
    font-size:clamp(.85rem,2.5vw,1.1rem);font-weight:600;
    color:#4fc3f7;
    letter-spacing:clamp(1px,0.5vw,3px);
}
.heatmap-nav-btn{
    background:none;border:1px solid rgba(79,195,247,0.2);
    color:#4fc3f7;
    font-size:.8rem;
    padding:4px 10px;
    border-radius:4px;
    cursor:pointer;
    transition:all .2s;
    font-family:'Share Tech Mono',monospace;
}
.heatmap-nav-btn:hover{
    background:rgba(79,195,247,0.1);
    border-color:rgba(79,195,247,0.4);
}

.heatmap-stats{
    display:flex;justify-content:center;gap:clamp(10px,2.5vw,20px);
    margin-bottom:12px;
    flex-wrap:wrap;
}
.heatmap-stat{
    font-family:'Rajdhani',sans-serif;
    font-size:clamp(.7rem,1.8vw,.8rem);
    color:rgba(255,255,255,0.5);
}
.heatmap-stat-val{
    color:#4fc3f7;
    font-weight:600;
    font-family:'Share Tech Mono',monospace;
}

.heatmap-grid-wrap{
    display:flex;gap:4px;
    overflow-x:auto;
    padding-bottom:8px;
}
.heatmap-grid-wrap::-webkit-scrollbar{height:4px}
.heatmap-grid-wrap::-webkit-scrollbar-thumb{background:rgba(79,195,247,0.2);border-radius:2px}

.heatmap-day-labels{
    display:flex;flex-direction:column;gap:2px;
    padding-top:0;
    min-width:28px;
}
.heatmap-day-labels span{
    height:12px;
    font-family:'Share Tech Mono',monospace;
    font-size:.55rem;
    color:rgba(255,255,255,0.25);
    display:flex;align-items:center;
    line-height:1;
}

.heatmap-grid{
    display:flex;gap:2px;
}

.heatmap-week{
    display:flex;flex-direction:column;gap:2px;
}

.heatmap-cell{
    width:12px;height:12px;
    border-radius:2px;
    cursor:pointer;
    transition:transform .15s,outline .15s;
}
.heatmap-cell:hover{
    transform:scale(1.6);
    outline:1px solid rgba(255,255,255,0.3);
    z-index:10;
    position:relative;
}

/* Color levels */
.hm-lv0{background:rgba(79,195,247,0.06);border:1px solid rgba(79,195,247,0.08)}
.hm-lv1{background:rgba(79,195,247,0.18);border:1px solid rgba(79,195,247,0.12)}
.hm-lv2{background:rgba(79,195,247,0.35);border:1px solid rgba(79,195,247,0.2)}
.hm-lv3{background:rgba(120,100,255,0.5);border:1px solid rgba(120,100,255,0.3)}
.hm-lv4{background:rgba(255,215,0,0.6);border:1px solid rgba(255,215,0,0.4);box-shadow:0 0 4px rgba(255,215,0,0.3)}

/* Outside current year */
.hm-outside{background:transparent;border:1px solid transparent;cursor:default}
.hm-outside:hover{transform:none;outline:none}

/* Future dates */
.hm-future{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);cursor:default}
.hm-future:hover{transform:none;outline:none}

/* Today marker */
.hm-today{
    outline:2px solid #4fc3f7 !important;
    outline-offset:1px;
}

/* Month labels */
.heatmap-months{
    display:grid;
    grid-auto-columns:14px;
    grid-auto-flow:column;
    gap:2px;
    margin-left:32px;
    margin-bottom:4px;
    height:14px;
}
.heatmap-month-label{
    font-family:'Share Tech Mono',monospace;
    font-size:.55rem;
    color:rgba(255,255,255,0.35);
    white-space:nowrap;
}

/* Legend */
.heatmap-legend{
    display:flex;align-items:center;justify-content:center;gap:4px;
    margin-top:12px;
}
.heatmap-legend-label{
    font-family:'Share Tech Mono',monospace;
    font-size:.6rem;
    color:rgba(255,255,255,0.25);
    margin:0 4px;
}
.heatmap-cell-legend{
    width:12px;height:12px;
    border-radius:2px;
    display:inline-block;
}

/* Tooltip */
.heatmap-tooltip{
    position:absolute;
    background:rgba(10,15,30,0.95);
    border:1px solid rgba(79,195,247,0.3);
    border-radius:6px;
    padding:8px 12px;
    font-family:'Share Tech Mono',monospace;
    font-size:.72rem;
    color:#e0e0e0;
    pointer-events:none;
    z-index:100;
    white-space:nowrap;
    transform:translateX(-50%);
    box-shadow:0 4px 16px rgba(0,0,0,0.4);
}
.heatmap-tooltip strong{
    color:#4fc3f7;
    font-size:.75rem;
}

/* Heatmap responsive */
@media(max-width:600px){
    .heatmap-container{padding:8px 4px}
    .heatmap-cell{width:9px;height:9px}
    .heatmap-cell-legend{width:9px;height:9px}
    .heatmap-day-labels span{height:9px;font-size:.45rem}
    .heatmap-day-labels{min-width:20px}
    .heatmap-stats{gap:8px}
    .heatmap-months{grid-auto-columns:11px;margin-left:24px}
    .heatmap-grid{gap:1px}
    .heatmap-week{gap:1px}
    .heatmap-grid-wrap{gap:2px}
}
@media(max-width:380px){
    .heatmap-cell{width:8px;height:8px}
    .heatmap-cell-legend{width:8px;height:8px}
    .heatmap-day-labels span{height:8px;font-size:.4rem}
    .heatmap-day-labels{min-width:18px}
    .heatmap-months{grid-auto-columns:10px;margin-left:22px}
}

/* ========== EXERCISE MUSCLE GROUP FILTER ========== */
.exercise-filter-bar{
    display:flex;gap:6px;overflow-x:auto;padding:4px 0 6px;
    scrollbar-width:none;-ms-overflow-style:none;
    -webkit-overflow-scrolling:touch;
}
.exercise-filter-bar::-webkit-scrollbar{display:none}

.ef-pill{
    flex-shrink:0;
    font-family:var(--mono);font-size:clamp(.6rem,1.6vw,.72rem);
    padding:clamp(5px,1.2vw,7px) clamp(10px,2.5vw,14px);
    background:var(--dark);border:1px solid var(--border);
    color:var(--dim);border-radius:20px;cursor:pointer;
    transition:all .25s;white-space:nowrap;
    letter-spacing:.5px;text-transform:uppercase;
}
.ef-pill:hover{
    border-color:var(--blue);color:var(--text);
}
.ef-pill.active{
    background:var(--blue);color:var(--dark);border-color:var(--blue);
    font-weight:700;box-shadow:0 0 12px rgba(79,195,247,.3);
}

/* Optgroup styling inside exercise select */
#logExercise optgroup{
    font-family:var(--mono);font-size:.72rem;color:var(--dim);
    padding:6px 0 2px;letter-spacing:1px;
}
#logExercise option{
    padding:6px 10px;font-size:.9rem;
}

/* ========================================
   HUNTER'S JOURNAL
   ======================================== */
.jn-header{
    text-align:center;padding:18px 0 8px;
}
.jn-header-icon{
    font-size:2rem;margin-bottom:4px;
}
.jn-header-title{
    font-family:var(--font);font-size:clamp(1rem,3vw,1.3rem);
    color:var(--gold);letter-spacing:clamp(2px,1vw,4px);text-transform:uppercase;
    text-shadow:0 0 15px rgba(255,215,64,.3);
}
.jn-header-sub{
    font-family:var(--mono);font-size:clamp(.65rem,1.5vw,.75rem);
    color:var(--dim);letter-spacing:1px;margin-top:4px;
}
.jn-progress{
    text-align:center;color:var(--dim);font-size:.78rem;
    font-family:var(--mono);margin-bottom:14px;letter-spacing:.5px;
}
.jn-chapter{
    background:var(--panel);border:1px solid var(--border);
    border-radius:10px;margin-bottom:10px;overflow:hidden;
    transition:border-color .3s;
}
.jn-chapter:hover{ border-color:var(--blue); }
.jn-chapter.jn-new{ border-color:rgba(0,229,255,.25); }
.jn-chapter-header{
    display:flex;align-items:center;justify-content:space-between;
    padding:12px 14px;cursor:pointer;
    font-family:var(--body);font-size:.92rem;color:var(--text);
    transition:background .25s;position:relative;
}
.jn-chapter-header:hover{ background:rgba(0,229,255,.05); }
.jn-ch-left{
    display:flex;align-items:center;gap:10px;min-width:0;flex:1;
}
.jn-ch-icon{
    font-size:1.2rem;flex-shrink:0;
}
.jn-ch-info{
    display:flex;flex-direction:column;gap:1px;min-width:0;
}
.jn-ch-num{
    color:var(--cyan);font-size:.7rem;font-family:var(--mono);
    letter-spacing:1px;
}
.jn-ch-title{
    font-weight:600;font-size:clamp(.85rem,2vw,.95rem);
    color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
.jn-ch-right{
    display:flex;align-items:center;gap:8px;flex-shrink:0;
}
.jn-ch-arrow{
    color:var(--dim);font-size:.9rem;transition:color .2s;
}
.jn-badge-new{
    background:var(--red);color:#fff;font-size:.6rem;
    padding:2px 7px;border-radius:8px;font-family:var(--mono);
    letter-spacing:1px;animation:pulse 1.5s infinite;
}
.jn-chapter-body{
    display:none;padding:14px 16px 16px;
    font-size:clamp(.85rem,2.2vw,.95rem);line-height:1.8;color:var(--text);
    font-family:'Rajdhani',sans-serif;border-top:1px solid var(--border);
    opacity:.9;
}
.jn-chapter-body p{
    margin-bottom:10px;
}
.jn-chapter-body.open{ display:block;animation:panelIn .3s ease; }
.jn-highlight{
    color:var(--cyan);font-weight:600;
}
.jn-system-msg{
    display:block;margin:10px 0;padding:8px 12px;
    background:rgba(0,229,255,.06);border-left:3px solid var(--cyan);
    color:var(--cyan);font-family:var(--mono);font-size:clamp(.72rem,1.8vw,.82rem);
    letter-spacing:.5px;border-radius:0 6px 6px 0;
}
.jn-quote{
    display:block;margin:10px 0;padding:10px 14px;
    border-left:3px solid var(--gold);color:var(--gold);
    font-style:italic;font-size:clamp(.82rem,2vw,.9rem);
    background:rgba(255,215,0,.04);border-radius:0 6px 6px 0;
}
.jn-final{
    text-align:center;color:var(--gold);font-size:1rem;
    font-family:var(--font);padding:12px 0 4px;
    letter-spacing:1.5px;
}
/* Locked chapters */
.jn-locked{ opacity:.45; }
.jn-locked .jn-chapter-header{
    cursor:default;
}
.jn-locked .jn-chapter-header:hover{ background:transparent; }
.jn-locked .jn-ch-title{ color:var(--dim); }
.jn-locked-header{
    font-family:var(--mono);font-size:clamp(.7rem,1.8vw,.8rem);
    color:var(--dim);letter-spacing:2px;text-transform:uppercase;
    padding:16px 0 8px;text-align:center;
}
.jn-ch-cond{
    font-size:clamp(.6rem,1.5vw,.7rem);color:var(--dim);font-family:var(--mono);
    letter-spacing:.5px;text-align:right;
}
/* Chapter accent colors by milestone tier */
.jn-ch-awakening .jn-ch-num{ color:#81d4fa; }
.jn-ch-rising .jn-ch-num{ color:var(--green); }
.jn-ch-elite .jn-ch-num{ color:var(--gold); }
.jn-ch-monarch .jn-ch-num{ color:#e040fb; }
.jn-ch-legend .jn-ch-num{ color:#ff5252; }

/* Tab badge for unread */
.tab-badge{
    position:absolute;top:2px;right:2px;
    background:var(--red);color:#fff;font-size:.55rem;
    min-width:14px;height:14px;border-radius:7px;
    display:flex;align-items:center;justify-content:center;
    font-family:var(--mono);font-weight:700;
    animation:pulse 1.5s infinite;
}
.tab{ position:relative; }

/* ========================================
   WORKOUT TEMPLATES
   ======================================== */
.templates-content{
    margin-bottom:16px;
}
.tpl-header{
    text-align:center;padding:12px 0 6px;
    font-family:var(--heading);font-size:1.1rem;
    color:var(--blue);letter-spacing:2px;text-transform:uppercase;
}
.tpl-sub{
    text-align:center;color:var(--dim);font-size:.72rem;
    font-family:var(--mono);margin-bottom:12px;letter-spacing:.5px;
}
.tpl-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));
    gap:10px;margin-bottom:14px;
}
.tpl-card{
    background:var(--panel);border:1px solid var(--border);
    border-radius:10px;padding:14px 10px;text-align:center;
    cursor:pointer;transition:all .25s;
}
.tpl-card:hover{
    border-color:var(--blue);transform:translateY(-2px);
    box-shadow:0 4px 16px rgba(79,195,247,.15);
}
.tpl-card.active{
    border-color:var(--green);box-shadow:0 0 12px rgba(76,175,80,.2);
}
.tpl-card-icon{
    font-size:1.8rem;margin-bottom:6px;
}
.tpl-card-name{
    font-family:var(--heading);font-size:.82rem;
    color:var(--text);letter-spacing:.5px;margin-bottom:4px;
}
.tpl-card-desc{
    font-size:.68rem;color:var(--dim);font-family:var(--mono);
    letter-spacing:.3px;
}
.tpl-card-custom{
    border-style:dashed;border-color:var(--dim);
}
.tpl-card-custom:hover{ border-color:var(--gold); }
.tpl-card-delete{
    position:absolute;top:4px;right:8px;
    background:none;border:none;color:var(--red);
    font-size:.9rem;cursor:pointer;opacity:.6;
    transition:opacity .2s;
}
.tpl-card-delete:hover{ opacity:1; }
.tpl-card{ position:relative; }

/* Active Session */
.tpl-session{
    background:var(--panel);border:1px solid var(--border);
    border-radius:10px;padding:14px;margin-bottom:14px;
}
.tpl-session-title{
    font-family:var(--heading);font-size:1rem;
    color:var(--gold);letter-spacing:1px;margin-bottom:4px;
}
.tpl-session-sub{
    font-size:.72rem;color:var(--dim);font-family:var(--mono);
    margin-bottom:12px;
}
.tpl-exercise-list{
    display:flex;flex-direction:column;gap:8px;
}
.tpl-ex-item{
    background:rgba(255,255,255,.03);border:1px solid var(--border);
    border-radius:8px;padding:10px 12px;
    transition:border-color .2s;
}
.tpl-ex-item.logged{
    border-color:var(--green);opacity:.6;
}
.tpl-ex-name{
    font-family:var(--heading);font-size:.85rem;
    color:var(--text);margin-bottom:6px;letter-spacing:.5px;
}
.tpl-ex-form{
    display:flex;gap:6px;flex-wrap:wrap;align-items:center;
}
.tpl-field{
    background:var(--dark);border:1px solid var(--border);
    color:var(--text);border-radius:6px;padding:5px 8px;
    font-size:.78rem;font-family:var(--mono);
    width:60px;text-align:center;
}
.tpl-field:focus{
    border-color:var(--blue);outline:none;
}
.tpl-field-label{
    font-size:.62rem;color:var(--dim);font-family:var(--mono);
    letter-spacing:.5px;text-transform:uppercase;
}
.tpl-log-btn{
    background:var(--blue);color:var(--dark);border:none;
    border-radius:6px;padding:5px 12px;cursor:pointer;
    font-family:var(--mono);font-size:.72rem;font-weight:700;
    letter-spacing:.5px;transition:all .2s;margin-left:auto;
}
.tpl-log-btn:hover{ filter:brightness(1.15); }
.tpl-log-btn:disabled{
    background:var(--border);color:var(--dim);cursor:default;
}
.tpl-logall-btn{
    display:block;width:100%;margin-top:10px;
    background:var(--green);color:var(--dark);border:none;
    border-radius:8px;padding:10px;cursor:pointer;
    font-family:var(--heading);font-size:.9rem;
    letter-spacing:1px;text-transform:uppercase;
    transition:all .2s;
}
.tpl-logall-btn:hover{ filter:brightness(1.15); }
.tpl-session-close{
    display:block;width:100%;margin-top:6px;
    background:none;border:1px solid var(--border);color:var(--dim);
    border-radius:8px;padding:8px;cursor:pointer;
    font-family:var(--mono);font-size:.72rem;
    letter-spacing:.5px;transition:all .2s;
}
.tpl-session-close:hover{
    border-color:var(--red);color:var(--red);
}

/* Template Creator Overlay */
.tpl-creator-overlay{
    position:fixed;inset:0;background:rgba(0,0,0,.85);
    z-index:2000;display:flex;align-items:center;justify-content:center;
    padding:20px;
}
.tpl-creator-overlay.hidden{ display:none; }
.tpl-creator-box{
    background:var(--dark);border:1px solid var(--blue);
    border-radius:14px;padding:20px;width:100%;max-width:420px;
    max-height:80vh;overflow-y:auto;
}
.tpl-creator-title{
    font-family:var(--heading);font-size:1.1rem;
    color:var(--blue);text-align:center;letter-spacing:2px;
    margin-bottom:14px;text-transform:uppercase;
}
.tpl-creator-field{
    display:block;width:100%;background:var(--panel);
    border:1px solid var(--border);color:var(--text);
    border-radius:8px;padding:8px 12px;margin-bottom:10px;
    font-family:var(--mono);font-size:.85rem;
}
.tpl-creator-field:focus{
    border-color:var(--blue);outline:none;
}
.tpl-creator-select{
    display:block;width:100%;background:var(--panel);
    border:1px solid var(--border);color:var(--text);
    border-radius:8px;padding:8px 12px;margin-bottom:8px;
    font-family:var(--mono);font-size:.85rem;
}
.tpl-creator-add-btn{
    background:var(--blue);color:var(--dark);border:none;
    border-radius:8px;padding:8px 16px;cursor:pointer;
    font-family:var(--mono);font-size:.78rem;font-weight:700;
    letter-spacing:.5px;margin-bottom:12px;
}
.tpl-creator-ex-list{
    margin-bottom:14px;
}
.tpl-creator-ex-item{
    display:flex;align-items:center;justify-content:space-between;
    padding:6px 10px;background:rgba(255,255,255,.03);
    border:1px solid var(--border);border-radius:6px;
    margin-bottom:4px;font-size:.78rem;color:var(--text);
    font-family:var(--mono);
}
.tpl-creator-ex-remove{
    background:none;border:none;color:var(--red);
    cursor:pointer;font-size:.85rem;
}
.tpl-creator-actions{
    display:flex;gap:10px;
}
.tpl-creator-save{
    flex:1;background:var(--green);color:var(--dark);border:none;
    border-radius:8px;padding:10px;cursor:pointer;
    font-family:var(--heading);font-size:.9rem;
    letter-spacing:1px;text-transform:uppercase;
}
.tpl-creator-cancel{
    flex:1;background:none;border:1px solid var(--border);
    color:var(--dim);border-radius:8px;padding:10px;cursor:pointer;
    font-family:var(--mono);font-size:.78rem;letter-spacing:.5px;
}
.tpl-creator-cancel:hover{
    border-color:var(--red);color:var(--red);
}

/* ========== SCROLL READER OVERLAY ========== */
.scroll-overlay{
    position:fixed;inset:0;z-index:9000;
    background:rgba(2,5,16,0.96);
    display:flex;align-items:center;justify-content:center;
    backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    opacity:0;transition:opacity .3s ease;
    overflow:hidden;
}
.scroll-overlay.active{ opacity:1; }

.scroll-reader{
    width:94%;max-width:600px;max-height:90vh;
    display:flex;flex-direction:column;
    background:linear-gradient(180deg, rgba(8,16,40,0.95), rgba(4,8,20,0.98));
    border:1px solid rgba(79,195,247,.2);
    border-radius:12px;
    box-shadow:
        0 0 60px rgba(79,195,247,.08),
        0 0 120px rgba(0,229,255,.04),
        inset 0 1px 0 rgba(79,195,247,.15);
    animation:scrollEnter .5s ease;
}
@keyframes scrollEnter{
    0%{ opacity:0; transform:translateY(30px) scale(0.95); }
    100%{ opacity:1; transform:translateY(0) scale(1); }
}

.scroll-reader-header{
    display:flex;align-items:center;gap:14px;
    padding:20px 20px 16px;
    border-bottom:1px solid rgba(79,195,247,.12);
    background:linear-gradient(180deg, rgba(79,195,247,.06), transparent);
    border-radius:12px 12px 0 0;
    position:relative;
}
.scroll-reader-header::after{
    content:'';position:absolute;bottom:0;left:10%;right:10%;height:1px;
    background:linear-gradient(90deg, transparent, var(--cyan), transparent);
    opacity:.4;
}

.scroll-reader-icon{
    font-size:2.2rem;
    filter:drop-shadow(0 0 12px rgba(0,229,255,.4));
    animation:scrollIconGlow 3s ease-in-out infinite;
}
@keyframes scrollIconGlow{
    0%,100%{ filter:drop-shadow(0 0 12px rgba(0,229,255,.4)); }
    50%{ filter:drop-shadow(0 0 20px rgba(0,229,255,.7)); }
}

.scroll-reader-title-block{ flex:1; }

.scroll-reader-title{
    font-family:var(--heading);font-size:1.15rem;
    color:var(--cyan);letter-spacing:2px;
    text-transform:uppercase;
    text-shadow:0 0 12px rgba(0,229,255,.3);
}
.scroll-reader-subtitle{
    font-family:var(--mono);font-size:.72rem;
    color:var(--dim);margin-top:4px;
    letter-spacing:.5px;font-style:italic;
}
.scroll-reader-meta{
    display:flex;gap:10px;margin-top:6px;
    font-size:.7rem;
}
.scroll-reader-rank{
    color:var(--gold);font-family:var(--heading);
    letter-spacing:1px;
}
.scroll-reader-tier{
    color:var(--gold);font-size:.65rem;opacity:.7;
}

.scroll-reader-close{
    position:absolute;top:12px;right:14px;
    background:none;border:1px solid rgba(79,195,247,.2);
    color:var(--dim);font-size:1.1rem;
    width:32px;height:32px;border-radius:50%;
    cursor:pointer;display:flex;align-items:center;
    justify-content:center;
    transition:all .2s ease;
}
.scroll-reader-close:hover{
    color:var(--cyan);border-color:var(--cyan);
    box-shadow:0 0 12px rgba(0,229,255,.2);
}

.scroll-reader-body{
    overflow-y:auto;padding:24px 22px 30px;
    flex:1;
    scrollbar-width:thin;
    scrollbar-color:rgba(79,195,247,.2) transparent;
}
.scroll-reader-body::-webkit-scrollbar{ width:4px; }
.scroll-reader-body::-webkit-scrollbar-track{ background:transparent; }
.scroll-reader-body::-webkit-scrollbar-thumb{
    background:rgba(79,195,247,.25);border-radius:4px;
}

.scroll-chapter{
    margin-bottom:24px;
}
.scroll-ch-heading{
    font-family:var(--heading);font-size:.88rem;
    color:var(--blue);letter-spacing:2px;
    text-transform:uppercase;
    margin-bottom:12px;
    padding-bottom:8px;
    border-bottom:1px solid rgba(79,195,247,.08);
    text-shadow:0 0 8px rgba(79,195,247,.2);
}
.scroll-ch-body p{
    font-family:var(--body);font-size:.82rem;
    color:var(--text);line-height:1.75;
    margin:0 0 14px;
    text-align:justify;
}
.scroll-ch-body p:last-child{ margin-bottom:0; }

.scroll-divider{
    text-align:center;
    color:rgba(79,195,247,.25);
    font-size:.75rem;
    letter-spacing:8px;
    margin:20px 0;
}

.scroll-end-mark{
    text-align:center;
    font-family:var(--mono);font-size:.7rem;
    color:var(--dim);letter-spacing:2px;
    margin-top:30px;padding-top:20px;
    border-top:1px solid rgba(79,195,247,.08);
    opacity:.6;
}

/* Shop Read Button */
.shop-read-btn{
    background:none;
    border:1px solid rgba(0,229,255,.25);
    color:var(--cyan);
    padding:6px 14px;border-radius:6px;
    font-family:var(--mono);font-size:.72rem;
    cursor:pointer;letter-spacing:.5px;
    transition:all .2s ease;
    white-space:nowrap;
}
.shop-read-btn:hover{
    background:rgba(0,229,255,.08);
    border-color:var(--cyan);
    box-shadow:0 0 16px rgba(0,229,255,.15);
    text-shadow:0 0 8px rgba(0,229,255,.4);
}
.shop-read-btn.read{
    border-color:rgba(105,240,174,.2);
    color:var(--green);
}
.shop-read-btn.read:hover{
    background:rgba(105,240,174,.06);
    border-color:var(--green);
    box-shadow:0 0 16px rgba(105,240,174,.12);
}

/* Scroll reader mobile */
@media(max-width:480px){
    .scroll-reader{
        width:97%;max-height:94vh;
        border-radius:8px;
    }
    .scroll-reader-header{
        padding:14px 14px 12px;gap:10px;
    }
    .scroll-reader-icon{ font-size:1.8rem; }
    .scroll-reader-title{ font-size:1rem; }
    .scroll-reader-subtitle{ font-size:.65rem; }
    .scroll-reader-body{ padding:18px 16px 24px; }
    .scroll-ch-heading{ font-size:.8rem; }
    .scroll-ch-body p{ font-size:.78rem;line-height:1.7; }
    .scroll-reader-close{
        width:28px;height:28px;font-size:.95rem;
        top:10px;right:10px;
    }
}

/* ========== BODY FAT ANALYZER ========== */
.bf-form{
    display:flex;flex-direction:column;gap:10px;
}
.bf-row-group{
    display:grid;grid-template-columns:1fr 1fr;gap:10px;
}
.bf-row{
    display:flex;flex-direction:column;gap:4px;
}
.bf-row label{
    font-family:var(--mono);font-size:.72rem;
    color:var(--dim);letter-spacing:.5px;text-transform:uppercase;
}
.bf-row label small{
    color:var(--dim);opacity:.6;text-transform:none;
    letter-spacing:0;
}
.bf-row input, .bf-row select{
    background:var(--dark);border:1px solid var(--border);
    color:var(--text);padding:8px 10px;border-radius:6px;
    font-family:var(--mono);font-size:.85rem;
    transition:border-color .2s;
}
.bf-row input:focus, .bf-row select:focus{
    border-color:var(--cyan);outline:none;
    box-shadow:0 0 8px rgba(0,229,255,.15);
}
.bf-row select{
    cursor:pointer;
    appearance:none;-webkit-appearance:none;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%235a7488'/%3E%3C/svg%3E");
    background-repeat:no-repeat;
    background-position:right 10px center;
    padding-right:28px;
}
.bf-method-note{
    text-align:center;font-family:var(--mono);
    font-size:.65rem;color:var(--dim);
    letter-spacing:.5px;padding:4px 0;
    opacity:.6;
}
.bf-hip-row{
    grid-template-columns:1fr;
}

/* Results Card */
.bf-result-card{
    margin-top:16px;padding:18px;
    background:linear-gradient(135deg, rgba(8,16,40,.6), rgba(4,8,20,.8));
    border:1px solid rgba(79,195,247,.12);
    border-radius:10px;
    text-align:center;
}
.bf-gauge-wrap{
    display:flex;justify-content:center;margin-bottom:8px;
}
.bf-gauge-svg{
    width:170px;height:100px;
}
.bf-gauge-fill{
    animation:bfGaugeDraw 1s ease forwards;
    stroke-dasharray:220;
    stroke-dashoffset:220;
}
@keyframes bfGaugeDraw{
    to{ stroke-dashoffset:0; }
}
.bf-gauge-val{
    font-family:var(--heading);
}
.bf-cat-badge{
    display:inline-block;
    padding:4px 16px;border-radius:20px;
    border:1px solid;
    font-family:var(--heading);font-size:.78rem;
    letter-spacing:1.5px;text-transform:uppercase;
    margin-bottom:14px;
}

/* Stats Grid */
.bf-stats-grid{
    display:grid;grid-template-columns:repeat(2, 1fr);gap:10px;
    margin-top:10px;
}
.bf-stat{
    padding:10px 6px;
    background:rgba(4,8,20,.5);
    border:1px solid rgba(79,195,247,.06);
    border-radius:6px;
}
.bf-stat-val{
    font-family:var(--heading);font-size:clamp(.95rem,2.5vw,1.15rem);
    font-weight:700;
}
.bf-stat-label{
    font-family:var(--mono);font-size:.65rem;
    color:var(--dim);margin-top:3px;letter-spacing:.3px;
}

/* Composition Bar */
.bf-comp-bar{
    margin-top:14px;padding:12px;
    background:rgba(4,8,20,.4);
    border-radius:8px;
    border:1px solid rgba(79,195,247,.06);
}
.bf-comp-label{
    font-family:var(--mono);font-size:.68rem;
    color:var(--dim);text-align:center;
    margin-bottom:8px;letter-spacing:.5px;
    text-transform:uppercase;
}
.bf-comp-track{
    display:flex;height:14px;border-radius:7px;
    overflow:hidden;
    background:rgba(0,0,0,.3);
}
.bf-comp-lean{
    background:linear-gradient(90deg, #4fc3f7, #69f0ae);
    transition:width .6s ease;
    border-radius:7px 0 0 7px;
}
.bf-comp-fat{
    background:linear-gradient(90deg, #ffd740, #ff5252);
    transition:width .6s ease;
    border-radius:0 7px 7px 0;
}
.bf-comp-legend{
    display:flex;justify-content:center;gap:20px;
    margin-top:8px;font-family:var(--mono);font-size:.68rem;color:var(--dim);
}
.bf-dot{
    display:inline-block;width:8px;height:8px;
    border-radius:50%;margin-right:4px;vertical-align:middle;
}
.bf-dot-lean{ background:var(--green); }
.bf-dot-fat{ background:var(--gold); }

/* History Panel */
.bf-hist-panel{
    margin-top:14px;padding:12px;
    background:rgba(4,8,20,.4);
    border:1px solid rgba(79,195,247,.06);
    border-radius:8px;
}
.bf-hist-title{
    font-family:var(--heading);font-size:.82rem;
    color:var(--blue);letter-spacing:1.5px;
    text-transform:uppercase;text-align:center;
    margin-bottom:4px;
}
.bf-hist-change{
    text-align:center;font-family:var(--mono);
    font-size:.72rem;margin-bottom:10px;
}
.bf-hist-header{
    display:grid;grid-template-columns:1fr .8fr .6fr .8fr;gap:4px;
    padding:4px 0;border-bottom:1px solid rgba(79,195,247,.1);
    font-family:var(--mono);font-size:.62rem;color:var(--dim);
    text-transform:uppercase;letter-spacing:.5px;
}
.bf-hist-row{
    display:grid;grid-template-columns:1fr .8fr .6fr .8fr;gap:4px;
    padding:5px 0;
    border-bottom:1px solid rgba(79,195,247,.04);
    font-family:var(--mono);font-size:.72rem;color:var(--text);
}
.bf-hist-date{ color:var(--dim); }
.bf-hist-bf{ color:var(--cyan); }
.bf-hist-bmi{ color:var(--blue); }
.bf-hist-wt{ color:var(--text); }

/* Body Fat â€” Mobile */
@media(max-width:480px){
    .bf-row-group{ grid-template-columns:1fr; }
    .bf-stats-grid{ grid-template-columns:repeat(2,1fr);gap:8px; }
    .bf-stat-val{ font-size:.88rem; }
    .bf-gauge-svg{ width:150px;height:88px; }
    .bf-hist-header,.bf-hist-row{ font-size:.65rem; }
}

/* ========== TUTORIAL / HUNTER'S GUIDE ========== */
/* Quick Start Box */
.tut-quickstart{
    margin-top:16px;padding:16px;
    background:rgba(0,229,255,.03);
    border:1px solid rgba(0,229,255,.15);
    border-radius:10px;
}
.tut-qs-title{
    font-family:var(--font);font-size:clamp(.9rem,2.5vw,1.1rem);
    color:var(--cyan);text-align:center;letter-spacing:2px;
    margin-bottom:12px;text-shadow:0 0 10px rgba(0,229,255,.3);
}
.tut-qs-steps{
    display:flex;flex-direction:column;gap:8px;
}
.tut-qs-step{
    display:flex;align-items:center;gap:10px;
    padding:8px 12px;background:rgba(255,255,255,.02);
    border-radius:6px;font-family:var(--mono);
    font-size:clamp(.75rem,2vw,.85rem);color:var(--text);
}
.tut-qs-step strong{ color:var(--cyan); }
.tut-qs-num{
    font-family:var(--font);color:var(--cyan);
    font-size:1.1rem;min-width:24px;text-align:center;
}

/* Tutorial content inline styles */
.tut-highlight{
    color:var(--cyan);font-weight:600;
}
.tut-tip{
    display:block;margin:8px 0;padding:8px 12px;
    background:rgba(0,229,255,.05);border-left:3px solid var(--cyan);
    color:var(--cyan);font-family:var(--mono);
    font-size:clamp(.72rem,1.8vw,.82rem);
    letter-spacing:.5px;border-radius:0 6px 6px 0;
}
.tut-stats-grid{
    display:flex;flex-direction:column;gap:4px;
    padding:4px 0;
}
.tut-stats-grid span{
    font-size:clamp(.78rem,2vw,.88rem);
}
.tut-stats-grid strong{
    color:var(--cyan);
}
.tut-rank-list{
    line-height:1.8;
}
.tut-rank{
    display:inline-block;min-width:60px;
    font-family:var(--font);font-weight:700;
    letter-spacing:1px;margin-right:6px;
}
.rank-e{ color:#9e9e9e; }
.rank-d{ color:#42a5f5; }
.rank-c{ color:#66bb6a; }
.rank-b{ color:#ab47bc; }
.rank-a{ color:#ffa726; }
.rank-s{ color:#ef5350; }
.rank-x{ color:#ff1744;text-shadow:0 0 8px rgba(255,23,68,.4); }